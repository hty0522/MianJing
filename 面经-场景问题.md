# 场景问题

### 如何解决多用户并发访问秒杀商品的请求问题和数据存储问题？

#### 秒杀业务优化

​		拦截请求，只放一部分请求进来，不要让锁冲突落到数据库上去。以100W人抢10个手机为例，随机只放1000个请求进来就好。可以利用消息队列的方式，每秒放一批进来。没成功的就返回失败，不要让压力转移到服务器端。

​		充分利用缓存，先把数据库里的东西提前加载到redis来；其次由于redis串行执行，可以在redis中存储一个信息，每一个请求进来，key值减1，等减到0的时候，拒绝所有请求。防止超卖



### 为什么要用消息队列

1. 通过异步处理提高系统性能（削峰、减少响应所需时间）
2. 降低系统耦合性

